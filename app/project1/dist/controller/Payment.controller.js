sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,o){"use strict";return e.extend("project1.controller.Payment",{onInit:function(){var e=new sap.ui.model.json.JSONModel({selectedKey:""});this.getView().setModel(e,"payType")},onPayModeChange:function(e){var t=e.getParameter("selectedItem").getKey();var o=this.getView().getModel("payType");o.setProperty("/selectedKey",t);this.byId("upiField").setValue("");this.byId("cardField").setValue("");this.byId("payBtn").setEnabled(false)},onInputChange:function(){var e=this.getView();var t=e.getModel("payType").getProperty("/selectedKey");var o=t==="upi"?this.byId("upiField"):this.byId("cardField");var r=o?o.getValue().trim():"";this.byId("payBtn").setEnabled(!!r)},onPay:function(){var e=this.getOwnerComponent().getModel("cart");var r=e.getProperty("/items")||[];var a=e.getProperty("/total")||0;if(r.length===0){t.show("Cart is empty!");return}var s=localStorage.getItem("jwt");fetch("/ecommerce-service/placeOrder",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({items:r,total:a})}).then(e=>e.ok?e.json():e.json().then(e=>Promise.reject(e))).then(()=>{e.setProperty("/items",[]);e.setProperty("/total",0);o.success("Payment successful! Order placed.",{actions:["Go to Home"],onClose:function(e){if(e==="Go to Home"){this.getOwnerComponent().getRouter().navTo("RouteDashboard")}}.bind(this)})}).catch(e=>o.error("Order failed: "+(e&&e.error&&e.error.message||"Unknown")))}})});
//# sourceMappingURL=Payment.controller.js.map